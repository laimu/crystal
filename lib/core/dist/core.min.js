Function.prototype.bind||(Function.prototype.bind=function(){var e=Array.prototype.slice;return function(t){var n=this,r=e.call(arguments,1);return r.length?function(){return arguments.length?n.apply(t,r.concat(e.call(arguments))):n.apply(t,r)}:function(){return arguments.length?n.apply(t,arguments):n.call(t)}}}()),function(e){e.namespace("ali");var t=function(){var e=arguments[0],t,n=0,r,i,s,o;t=window,s=e;if(!s.indexOf("."))return t[s]=t[s]||{},t[s];i=s.split("."),i[0]=="window"?o=i[1]:o=i[0];for(r=i[0]=="window"?1:0;r<i.length;r++){t[i[r]]=t[i[r]]||{},t=t[i[r]];if(r==i.length-1)return t}};ali.defineClass=function(){var n=function(){typeof this._init=="function"&&arguments[0]!==undefined&&this._init.apply(this,arguments)},r=arguments,i=Object,o=[],u;for(var a=0;a<r.length;a++)typeof r[a]=="function"&&o.push(r[a]);if(o.length>=1)for(var a=0;a<o.length;a++)o[a].logger?i=o[a]:u=o[a];if(i!=Object){function f(){}f.prototype=i.prototype,n.prototype=new f({}),n.prototype.constructor=n,n._super=i.prototype}typeof u=="function"?u(n,n.prototype):"",n.prototype.aliClass=function(){return n};for(var a=0;a<r.length;a++)typeof r[a]=="object"&&e.extend(n.prototype,r[a]);if(typeof r[0]=="string"){var l=r[0].split("."),c=l.splice(-1,1);if(t(l.join("."))[c]){var h=t(l.join("."))[c];t(l.join("."))[c]=n,e.extend(t(l.join("."))[c],h)}else t(l.join("."))[c]=n}return n.prototype.getClassName=function(){return r[0]},n.logger=n.prototype.logger=jQuery.Logger(r[0]),n}}(jQuery),function(e){e.namespace("ali.uxcore.util"),ali.uxcore.util.pubsub={"sub":function(e,t,n){var r;e=e.split(/\s+/);var i=this._fcts||(this._fcts={});while(r=e.shift()){var s=i[r]||(i[r]={}),o=s.tail||(s.tail=s.next={});o.fct=t,o.scope=n,s.tail=o.next={}}return this},"unsub":function(e,t,n){var r,i,s;if(!e)delete this._fcts;else if(i=this._fcts){e=e.split(/\s+/);while(r=e.shift()){s=i[r],delete i[r];if(!t||!s)continue;while((s=s.next)&&s.next){if(s.fct===t&&(!n||s.context===n))continue;this.pub(r,s.fct,s.context)}}}return this},"pub":function(e){var t,n,r,i,s,o,u;if(!(r=this._fcts))return this;o=r.all,(e=e.split(/\s+/)).push(null);while(t=e.shift()){o&&e.push({"next":o.next,"tail":o.tail,"event":t});if(!(n=r[t]))continue;e.push({"next":n.next,"tail":n.tail})}u=Array.prototype.slice.call(arguments,1);while(n=e.pop()){i=n.tail,s=n.event?[n.event].concat(u):u;while((n=n.next)!==i)n.fct.apply(n.context||this,s)}return this}},ali.pubsub=ali.uxcore.util.pubsub}(jQuery),function(e){function i(n){if(e("#loggingContainer20120526").length==0){var r=["<div id='myc'><div id='loggingContainer20120526' style='display:none;clear:left;position:absolute;font-size:11px;right:0px;top:0px;width:350px;","color:#000;font-family:Monaco, Courier, monospace;z-index:1;border:2px solid #444;'>","<div id='loggingheader20120526' style='width:100%;height:25px;line-height:25px;background-color:#000;cursor:pointer;text-align:left;color:#FFF;bold-weight:bold;'>","<span style='float:left;'>Application Log Monitor</span>","<span style='float:right;cursor:pointer;color:#FFF;margin-right:5px;'><strong  id='loggingclosebtn20120526'>X</strong></span>","<span style='float:right;width:10px;height:10px;line-height:25px;background-color:yellow;margin:8px 5px;' class='bgcolor' data-bgcolor='yellow'></span>","<span style='margin:8px 5px;float:right;width:10px;height:10px;line-height:25px;background-color:#FFF;' class='bgcolor' data-bgcolor='#FFF'></span>","<span style='margin:8px 5px;float:right;width:10px;height:10px;line-height:25px;background-color:pink;' class='bgcolor' data-bgcolor='pink'></span>","<span style='margin:8px 5px;float:right;width:10px;height:10px;line-height:25px;background-color:#fcf9a4;' class='bgcolor' data-bgcolor='#fcf9a4'></span>","<span style='margin:8px 5px;float:right;width:10px;height:10px;line-height:25px;background-color:#00bf00;' class='bgcolor' data-bgcolor='#00bf00''></span>","<span style='margin:8px 5px;float:right;width:10px;height:10px;line-height:25px;background-color:#b4d3f2;' class='bgcolor' data-bgcolor='#b4d3f2''></span>","<span style='margin:8px 5px;float:right;width:10px;height:10px;line-height:25px;background-color:#bfbfbf;' class='bgcolor' data-bgcolor='#bfbfbf'></span>","</div>","<div id='logging20120526' style='position:relative;background-color:#FFF;font-size:11px;color:#000000;","text-align:left;padding: 19px 4px 2px 4px;width:340px;height:400px;overflow-y:auto;overflow-x:auto;'>","</div></div></div>"].join("");e(document.body).append(r),e("#loggingheader20120526").dblclick(function(){var t=e("#logging20120526");t.css("display")=="block"?t.hide():t.show()}),e("#loggingheader20120526").delegate(".bgcolor","click",function(){e("#logging20120526").css("background-color",e(this).data("bgcolor"))}),e("#loggingclosebtn20120526").click(function(){e("#loggingContainer20120526").hide()}),e(document).keydown(function(t){t.ctrlKey&&t.altKey&&t.keyCode==76&&(e("#loggingContainer20120526").show(),i.turnOn=!0,e.use("ui-core,ui-draggable,ui-dialog",function(){var n=e("#loggingContainer20120526","#myc");n.dialog({"modal":!1,"shim":!0,"draggable":{"handle":"#loggingheader20120526"},"css":{"left":t.clientX?t.clientX+100:600,"top":t.clientY?t.clientY+100:100}})}))})}e.each(t.logPool,function(e,t){s(t)}),t.logPool=[],s(n)}function s(t){var n=t.split("|")[0],r="";switch(n){case"error ":r="color:#990000;";break;case"warn ":r="color:#996600;";break;case"info ":r="color:#000000;";break;case"debug ":r="color:#444444;";break;case"log ":r="color:#888888;"}this._hasappendedmsg=!0,e("#logging20120526").append('<pre style="'+r+' ">'+t+"</pre>")}var t=function(){};t.level=-1,t.cacheSize=1e3,t.policy=[];var n=["error","warn","info","debug","log","time","timeEnd"];e.extend(t.prototype,{"enabled":function(e){return e>t.level?!1:!0},"doFilter":function(){if(t.policy.length!=1)return!0;var e=t.policy[0];return e=e.fi,e.test&&!e.test(arguments[0][0])&&!e.test(this.name())?!1:!0},"name":function(){return this._name},"log":function(){this._log(4,arguments)},"debug":function(){this._log(3,arguments)},"info":function(){this._log(2,arguments)},"warn":function(){this._log(1,arguments)},"error":function(){this._log(0,arguments)},"time":function(){this._log(5,arguments)},"timeEnd":function(){this._log(6,arguments)},"_handler":function(e,r,s){var o=n[e];s=[[o,r+" |"].join(" | ")].concat(Array.prototype.slice.call(s)),t.logPool||(t.logPool=[]),t.logPool.length===t.cacheSize&&(t.logPool=t.logPool.slice(1)),i.turnOn||this.monitor&&this.monitor.trunOn||t.logPool.push(s.join("")),this.monitor&&this.monitor.trunOn?this.monitor.appendMessage(s.join("")):this.monitor||i(s.join("")),self.console&&self.console.error&&(console.log.apply?console[o].apply(console,s):console[console[o]?o:"log"](s))},"_log":function(n,r){if(this.enabled(n)&&this.doFilter(r)){this._handler(n,this.name(),r);var i=this;t.policy.length>0?e.each(t.policy,function(e,t){var n=t.fi;n&&n.test&&(n.test(r)||n.test(i.name()))&&(t.cb?t.cb(r,window.location.href,(new Date).getTime()):"")}):""}}});var r={};e.extend({"Logger":function(e){return r[e]||(r[e]=new t(e),r[e]._name=e),r[e]}}),e.extend(e.Logger,{"setLogLevel":function(e){t.level=e},"setLogFilter":function(e,n){var r={"fi":e};n?r.cb=n:"",t.policy.push(r)},"setMonitorPage":function(e){t.monitor?t.monitor.MONITOR_PAGE=e:""},"gc":function(){t=null}})}(jQuery),ali.defineClass("ali.model",ali.pubsub,{"_init":function(){this.reuseModel=!0,this.initialize.apply(this,arguments),this.initHook(),this.pub("inited"),this.sub("beforedoV",function(){this.closeAllServerError()}.bind(this))},"$el":null,"jel":null,"events":{},"routes":{},"initData":function(){this.logger.warn("please rewrite initData method in your class.")},"afterRender":function(){this.logger.warn("please rewrite afterRender method in your class.")},"initialize":function(e){for(var t in e)this[t]=e[t];this.jel?"":this.jel=this.$el,this.delegateEvents();try{this._bindRoutes()}catch(n){}},"initHook":function(){jQuery.browser.msie&&(jQuery.browser.version=="7.0"||jQuery.browser.version=="6.0")&&(this.$(".editEl").focus(function(e){this.logger.info(this.$(e.target)),this.logger.info(this.$(e.target).html()),this.$(e.target).css("border","1px solid  #6482b9")}.bind(this)),this.$(".editEl").blur(function(e){this.$(e.target).css("border","1px solid #a0a0a0")}.bind(this)))},"render":function(){},"afterRender":function(){},"$":function(e){return this.jel?this.$el=this.jel:"",this.$el.find(e)},"find":function(e){return this.jel?this.$el=this.jel:"",this.$el.find(e)},"delegateEvents":function(){var e=/^(\S+)\s*(.*)$/,t=this.events;for(var n in t){var r=t[n];jQuery.isFunction(r)||(r=this[t[n]]);if(!r)throw new Error('Event "'+t[n]+'" does not exist');r=r.bind(this);var i=n.match(e),s=i[1],o=i[2];this.jel?this.$el=this.jel:"",this.reuseModel&&this.$(o).length>0?this.$el.delegate(o,s,r):this.reuseModel||this.$el.delegate(o,s,r)}},"_bindRoutes":function(){if(!this.routes)return;var e=[];for(var t in this.routes)e.unshift([t,this.routes[t]]);for(var n=0,r=e.length;n<r;n++)this.route(e[n][0],e[n][1],this[e[n][1]])},"initHistory":function(){function t(t,n){e.getHashPrex&&e.getHashPrex()==t.split("/")[0]&&crossroads.parse(t);return}var e=this;hasher.prependHash="!",hasher.initialized.add(t),hasher.changed.add(t),hasher.init()},"route":function(e,t,n){this.handlers||(this.handlers=[]),crossroads.addRoute(e,n.bind(this))},"getHashPrex":function(){return"g"},"doV":function(){},"closeAllServerError":function(){this.$(".comp-ff-backend-error").css("display","none")}}),function(e){e.namespace("ali.uxcore.util"),ali.uxcore.util.system={"STATICMODE":0,"LIVEMODE":1,"mode":1,"systempath":"","dummydataPath":"","globalmsgtimeout":3e3,"setMode":function(e){this.mode=e},"needLogMonitor":!1,"openLogMemory":!1},ali.system=ali.uxcore.util.system,e.namespace("ali.monitor");var t=ali.monitor;t.MONITOR_PAGE="monitor.html",t.getName=function(){return"iLogger"},ali.monitor.trunOn=!1,window.childOpen=!1,ali.system.needLogMonitor&&e(document).keydown(function(e){e.ctrlKey&&e.altKey&&e.keyCode==76&&(ali.monitor.trunOn=!0,t._openWindow())}),t._openWindow=function(){var e=window.location.href;e=e.replace(window.location.pathname,"/"+t.MONITOR_PAGE),t._window=window.open(e,"Monitor_","directories=no,location=no,menubar=no,status=yes,personalbar=no,titlebar=yes,toolbar=no,resizable=yes,scrollbars=no,width=500,height=400"),window.childOpen=!0,this._window&&window.focus(),window.onunload=this.UpdateChild},t.UpdateChild=function(){window.childOpen==1&&(this._window.opener=null,this._window.parentOpen=!1,t._window.close())},t.onHotKey=function(){(this._window==null||this._window.closed)&&this._openWindow()},t.appendMessage=function(e){var t=this._window;if(!t||!window.childOpen)this._openWindow(),t=this._window;if(t&&t.appendMessage){if(t.isFirstTime()){var n=ali.logger.logPool;for(var r=0;r<n.length;r++)t.appendMessage(n[r])}t.appendMessage(e)}}}(jQuery),function(e){function t(){}function n(e){C=[e]}function r(e,t,n){return e&&e.apply(t.context||t,n)}function i(e){return/\?/.test(e)?"&":"?"}function O(c){function Y(e){z++||(W(),j&&(T[I]={"s":[e]}),D&&(e=D.apply(c,[e])),r(O,c,[e,b,c]),r(_,c,[c,b]))}function Z(e){z++||(W(),j&&e!=w&&(T[I]=e),r(M,c,[c,e]),r(_,c,[c,e]))}c=e.extend({},k,c);var O=c.success,M=c.error,_=c.complete,D=c.dataFilter,P=c.callbackParameter,H=c.callback,B=c.cache,j=c.pageCache,F=c.charset,I=c.url,q=c.data,R=c.timeout,U,z=0,W=t,X,V,J,K,Q,G;return S&&S(function(e){e.done(O).fail(M),O=e.resolve,M=e.reject}).promise(c),c.abort=function(){!(z++)&&W()},r(c.beforeSend,c,[c])===!1||z?c:(I=I||u,q=q?typeof q=="string"?q:e.param(q,c.traditional):u,I+=q?i(I)+q:u,P&&(I+=i(I)+encodeURIComponent(P)+"=?"),!B&&!j&&(I+=i(I)+"_"+(new Date).getTime()+"="),I=I.replace(/=\?(&|$)/,"="+H+"$1"),j&&(U=T[I])?U.s?Y(U.s[0]):Z(U):(E[H]=n,K=e(y)[0],K.id=l+N++,F&&(K[o]=F),L&&L.version()<11.6?(Q=e(y)[0]).text="document.getElementById('"+K.id+"')."+p+"()":K[s]=s,A&&(K.htmlFor=K.id,K.event=h),K[d]=K[p]=K[v]=function(e){if(!K[m]||!/i/.test(K[m])){try{K[h]&&K[h]()}catch(t){}e=C,C=0,e?Y(e[0]):Z(a)}},K.src=I,W=function(e){G&&clearTimeout(G),K[v]=K[d]=K[p]=null,x[g](K),Q&&x[g](Q)},x[f](K,J=x.firstChild),Q&&x[f](Q,J),G=R>0&&setTimeout(function(){Z(w)},R)),c)}var s="async",o="charset",u="",a="error",f="insertBefore",l="_jqjsp",c="on",h=c+"click",p=c+a,d=c+"load",v=c+"readystatechange",m="readyState",g="removeChild",y="<script>",b="success",w="timeout",E=window,S=e.Deferred,x=e("head")[0]||document.documentElement,T={},N=0,C,k={"callback":l,"url":location.href},L=E.opera,A=!!e("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;O.setup=function(t){e.extend(k,t)},e.jsonp=O}(jQuery),function(e){e.namespace("ali.uxcore.util");var t=ali.system,n={"msgEl":null,"errorMsg":"Ĭ�ϴ�����Ϣ","successMsg":"Ĭ�ϳɹ���Ϣ"},r=e.Logger("ali.network");ali.uxcore.util.network={"ajax":function(){var e=arguments[0],i=e.methodName,s=e.scope;n=e.showMsgObj?e.showMsgObj:n;var o=e.success?e.success:function(){},u=e.error?e.error:function(){};e.dataType!="html"&&e.dataType!="script"&&e.dataType=="json"&&t.mode==t.STATICMODE;var a={"url":e.url,"dataType":e.dataType,"success":o,"error":function(e,t,n){r.log("status:"+e.status),t!=="error"&&u.apply(null,arguments),e.readyState==4?u.apply(null,arguments):r.log(e.readyState)},"timeout":e.jsonptimeout?e.jsonptimeout:5e3,"method":e.method,"type":e.type?e.type:"get","data":e.data?e.data:"","beforeSend":e.beforeSend?e.beforeSend:"","complete":e.complete?e.complete:"","cache":e.cache==undefined?!0:e.cache,"jsonp":e.jsonp?e.jsonp:"callback","jsonpCallback":e.jsonpCallback?e.jsonpCallback:"?"};return jQuery.ajax(a).done(this.onSuccess).fail(this.onError).always(this.onComplete)},"easyJsonp":function(e,t){var n=this;!t.loginEmplId||t["loginEmplId"]=="";var r=jQuery.Deferred();return t.loginEmplId=App.getEmplId(),t.jsonptimeout?"":t.jsonptimeout=5e3,t.callback=App.mode==App.STATIC_MODE?"jcb":"jcb"+jQuery.now(),jQuery.jsonp({"url":e,"data":t,"timeout":t.jsonptimeout,"callback":App.mode==App.STATIC_MODE?"jcb":"jcb"+jQuery.now(),"success":function(e){if(e.httpStatus=="200"){var t=e.content;typeof t=="string"||t==null?t={"content":t?t:"","errorCode":e?e.errorCode:"","metadata":e?e.metadata:""}:toString.call(t)=="[object Array]"?t={"content":t,"errorCode":e?e.errorCode:"","metadata":e?e.metadata:""}:(t.errorCode=e&&e.errorCode?e.errorCode:"",t.metadata=e.metadata?e.metadata:""),e.content?r.resolve(t):r.resolve(e)}else PageBus.publish("ais.global.error.500",{"data":e}),r.reject({"status":e.httpStatus,"errorcode":e.errorCode,"content":e.content})}.bind(this),"error":function(e,t,i){n.onError(e,t,i),r.reject({"status":"fail","errorcode":t})}.bind(this)}),r.promise()},"onSuccess":function(e){r.log("++++ onsuccess+++"),e.httpStatus&&e.httpStatus==500&&PageBus.publish("ais.global.error.500",{"data":e})},"onError":function(e,t,n){r.log("+++timout ++++"),r.info(t);var i={"content":[{"msg":"server have issue, please contact the server amdin."}]};switch(t){case"timeout":i={"content":[{"msg":"tiem out, please contact the server amdin."}]};break;case"abort":i={"content":[{"msg":"request be aborted"}]};break;default:i={"content":[{"msg":"Server have error,please contact the server amdin."}]}}PageBus.publish("ais.global.error.500",{"data":i})},"onComplete":function(){r.log("+++onComplete ++++")},"getScript":function(){var e=arguments[0];e.dataType="script",ali.network.ajax(e)},"getHTML":function(){var e=arguments[0];e.dataType="html",ali.network.ajax(e)},"getJSON":function(){var e=arguments[0];e.dataType="json",ali.network.ajax(e)}},ali.network=ali.uxcore.util.network}(jQuery);